# Anki Web 用户故事

## 概述

Anki Web 是一个 **Local-First** 的间隔重复记忆系统。

### 核心特点

| 功能 | 是否需要登录 |
|------|:------------:|
| 创建笔记/卡片 | ❌ 无需登录 |
| 复习学习 | ❌ 无需登录 |
| 导入共享牌组 | ❌ 无需登录 |
| 数据本地存储 | ❌ 无需登录 |
| **发布共享牌组** | ✅ 需要登录 |
| **云端同步（未来）** | ✅ 需要登录 |

> 💡 **所有核心学习功能无需登录即可使用**，数据存储在浏览器的 IndexedDB 中。只有发布共享内容或未来的云端同步功能需要账号。

本文档描述两类核心用户角色的使用场景和需求。

---

## 角色一：牌组开发者

> 包括系统管理员 (system) 和普通用户中的内容创作者

### 🎯 核心目标
- 创建高质量的学习内容
- 将知识以结构化方式呈现
- 分享给其他学习者

### 📖 用户故事

#### 1. 创建自定义笔记类型
**作为**牌组开发者，**我希望**创建自定义笔记类型，**以便**适配不同类型的学习内容。

**验收标准：**
- [ ] 可以定义任意数量的字段（如：单词、音标、释义、例句）
- [ ] 可以设置字段的描述信息
- [ ] 可以为笔记类型创建多个卡片模板

#### 2. 设计卡片模板
**作为**牌组开发者，**我希望**使用 HTML/CSS 设计精美的卡片模板，**以便**提升学习体验。

**验收标准：**
- [ ] 支持 Mustache 模板语法渲染字段
- [ ] 支持条件渲染（如：有音标时显示，无音标时隐藏）
- [ ] 可以预览卡片效果
- [ ] 一个笔记可生成多张卡片（如：正向、反向）

#### 3. 批量创建笔记
**作为**牌组开发者，**我希望**批量导入笔记数据，**以便**快速创建大量学习内容。

**验收标准：**
- [ ] 支持 JSON 格式批量导入
- [ ] 导入时自动生成对应的卡片
- [ ] 导入失败时能看到具体错误信息

#### 4. 发布共享牌组
**作为**牌组开发者，**我希望**将我的牌组发布到市场，**以便**帮助更多人学习。

**验收标准：**
- [ ] 可以设置牌组标题、描述、标签
- [ ] 可以选择使用的笔记类型和主题
- [ ] 发布后生成唯一的分享链接
- [ ] 可以查看下载统计

#### 5. 更新共享牌组
**作为**牌组开发者，**我希望**更新已发布的牌组内容，**以便**修正错误或添加新内容。

**验收标准：**
- [ ] 更新后版本号自动递增
- [ ] 已导入用户可以选择是否同步更新
- [ ] 保留历史版本的快照

### 🛠️ 系统管理员特有能力

**作为**系统管理员 (system)，**我还可以**：
- 发布官方推荐牌组（`is_official = true`）
- 设置精选牌组（`is_featured = true`）
- 管理内置笔记类型和主题
- 审核用户发布的内容

---

## 角色二：学习者

> 使用 Anki Web 进行间隔重复学习的用户

### 🎯 核心目标
- 高效记忆知识
- 追踪学习进度
- 随时随地学习

### 📖 用户故事

#### 1. 浏览共享牌组市场
**作为**学习者，**我希望**浏览共享牌组市场，**以便**找到感兴趣的学习内容。

**验收标准：**
- [ ] 可以按分类、标签、语言筛选
- [ ] 可以看到牌组的描述、卡片数量、下载量
- [ ] 可以预览牌组中的卡片样式
- [ ] 官方推荐牌组有明显标识

#### 2. 导入共享牌组
**作为**学习者，**我希望**一键导入共享牌组到本地，**以便**开始学习。

**验收标准：**
- [ ] 导入后所有卡片变为可学习状态
- [ ] 导入的数据存储在本地（离线可用）
- [ ] 可以选择导入到现有牌组或新建牌组

#### 3. 创建个人笔记
**作为**学习者，**我希望**创建自己的学习笔记，**以便**记录个人知识。

**验收标准：**
- [ ] 可以选择内置或自定义笔记类型
- [ ] 填写字段内容后自动生成卡片
- [ ] 可以添加标签便于分类

#### 4. 进行每日复习
**作为**学习者，**我希望**每天复习到期的卡片，**以便**巩固记忆。

**验收标准：**
- [ ] 首页显示今日待复习数量
- [ ] 按 SM-2 算法排序复习顺序
- [ ] 复习时显示正面，点击后显示背面
- [ ] 根据回忆难度评分（Again/Hard/Good/Easy）
- [ ] 实时更新下次复习时间

#### 5. 查看学习统计
**作为**学习者，**我希望**查看学习统计数据，**以便**了解自己的进度。

**验收标准：**
- [ ] 显示今日/本周/总计复习次数
- [ ] 显示记忆保留率
- [ ] 显示各状态卡片数量（新/学习中/复习/已掌握）
- [ ] 可视化学习热力图

#### 6. 离线学习
**作为**学习者，**我希望**在没有网络时也能学习，**以便**随时随地复习。

**验收标准：**
- [ ] 所有数据本地存储（IndexedDB）
- [ ] 离线时复习功能正常
- [ ] 联网后自动同步进度（未来功能）

#### 7. 管理牌组
**作为**学习者，**我希望**管理我的牌组，**以便**组织学习内容。

**验收标准：**
- [ ] 可以创建、重命名、删除牌组
- [ ] 支持牌组嵌套（树形结构）
- [ ] 可以移动笔记/卡片到其他牌组

---

## 用户旅程示例

### 场景 A：新用户开始学习英语词汇

> 💡 Local-First 架构：无需注册，打开即用！所有数据存储在浏览器本地。

```
1. 访问 Anki Web → 直接进入应用（无需登录）
2. 浏览共享牌组市场 → 搜索"英语词汇"
3. 找到官方推荐的"日常英语口语100句"牌组
4. 预览卡片效果 → 觉得不错
5. 点击"导入到我的牌组" → 数据存入本地 IndexedDB
6. 进入复习页面 → 开始学习第一张卡片
7. 看到 "What's up?" → 思考 → 点击显示答案
8. 看到释义和用法 → 选择"Good" → 本地更新复习计划
9. 继续复习剩余卡片
10. 完成今日学习 → 查看统计
```

### 场景 B：老师分享课程笔记

> 💡 发布共享牌组需要登录，以便追踪下载和管理更新。

```
1. 创建新牌组"高中物理公式"（本地操作，无需登录）
2. 选择内置的"Q&A (问答)"笔记类型
3. 批量导入 50 道物理公式卡片
4. 预览检查无误
5. 想要分享 → 点击"发布到市场" → 此时需要登录
6. 登录/注册账号
7. 填写描述、添加标签"物理、高考、公式"
8. 发布成功 → 获得分享链接
9. 分享给学生
10. 查看下载统计 → 100+ 人已导入
```

---

## 附录：角色权限对比

| 功能 | 学习者 | 牌组开发者 | 系统管理员 |
|------|:------:|:----------:|:----------:|
| 复习卡片 | ✅ | ✅ | ✅ |
| 创建个人笔记 | ✅ | ✅ | ✅ |
| 导入共享牌组 | ✅ | ✅ | ✅ |
| 创建笔记类型 | ❌ | ✅ | ✅ |
| 设计卡片模板 | ❌ | ✅ | ✅ |
| 发布共享牌组 | ❌ | ✅ | ✅ |
| 标记为官方推荐 | ❌ | ❌ | ✅ |
| 管理内置模板 | ❌ | ❌ | ✅ |

